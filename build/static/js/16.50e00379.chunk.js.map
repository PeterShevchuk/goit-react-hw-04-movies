{"version":3,"sources":["Containers/Sing/Registration.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","Components/Operations/operationsAuth.js"],"names":["initialState","name","email","password","Registration","useState","form","setForm","dispatch","useDispatch","inputHolder","target","value","useEffect","Loader","className","onSubmit","e","preventDefault","createNewUser","type","placeholder","onChange","to","navigation","login","_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","length","err","unsupportedIterableToArray","TypeError","baseURL","userData","a","axios","method","url","data","result","changeOptions","Token","token","console","log","userLogin","Name","user","userLoginOut","headers","Authorization","getUserInfo","setUserInfo"],"mappings":"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","file":"static/js/16.50e00379.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { navigation } from \"../../vars\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Loader } from \"../../redux/slice/Loader\";\r\nimport { createNewUser } from \"../../Components/Operations/operationsAuth\";\r\nimport \"./Sing.css\";\r\n\r\nconst initialState = {\r\n  name: \"\",\r\n  email: \"\",\r\n  password: \"\",\r\n};\r\n\r\nconst Registration = () => {\r\n  const [form, setForm] = useState(initialState);\r\n  const dispatch = useDispatch();\r\n\r\n  const inputHolder = ({ target }) => {\r\n    const { name, value } = target;\r\n    setForm({ ...form, [name]: value });\r\n  };\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    dispatch(createNewUser(form));\r\n  };\r\n\r\n  useEffect(() => {\r\n    dispatch(Loader(false));\r\n  }, [dispatch]);\r\n  return (\r\n    <div>\r\n      <h1 className=\"title\">Registration</h1>\r\n      <form className=\"registration-form\" onSubmit={onSubmit}>\r\n        <input type=\"text\" name=\"name\" placeholder=\"Name\" onChange={inputHolder} />\r\n        <input type=\"email\" name=\"email\" placeholder=\"Email\" onChange={inputHolder} />\r\n        <input type=\"password\" name=\"password\" placeholder=\"Password\" onChange={inputHolder} />\r\n        <button type=\"submit\">Sing up</button>\r\n        <p>\r\n          If you already have an account please <NavLink to={navigation.login}>login</NavLink>\r\n        </p>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Registration;\r\n","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import axios from \"axios\";\r\nimport { Loader } from \"../../redux/slice/Loader\";\r\nimport { changeOptions } from \"../../redux/slice/Options\";\r\nimport { setUserInfo } from \"../../redux/slice/UserInfo\";\r\n\r\nconst baseURL = \"https://goit-phonebook-api.herokuapp.com/users/\";\r\n\r\nexport const createNewUser = (userData) => async (dispatch) => {\r\n  try {\r\n    // console.log(userData);\r\n    dispatch(Loader(true));\r\n    const result = await axios({\r\n      method: \"post\",\r\n      url: baseURL + \"signup\",\r\n      data: userData,\r\n    });\r\n    dispatch(changeOptions({ Token: result.data.token }));\r\n  } catch (error) {\r\n    console.log(error);\r\n  } finally {\r\n    dispatch(Loader(false));\r\n  }\r\n};\r\n\r\nexport const userLogin = (userData) => async (dispatch) => {\r\n  try {\r\n    // console.log(userData);\r\n    dispatch(Loader(true));\r\n    const result = await axios({\r\n      method: \"post\",\r\n      url: baseURL + \"login\",\r\n      data: userData,\r\n    });\r\n    dispatch(changeOptions({ Token: result.data.token, Name: result.data.user.name }));\r\n  } catch (error) {\r\n    console.log(error);\r\n  } finally {\r\n    dispatch(Loader(false));\r\n  }\r\n};\r\n\r\nexport const userLoginOut = (token) => async (dispatch) => {\r\n  try {\r\n    // console.log(userData);\r\n    dispatch(Loader(true));\r\n    // const result = await axios.post(baseURL + \"/users/logout\", token);\r\n    await axios({\r\n      method: \"post\",\r\n      url: baseURL + \"logout\",\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n    dispatch(changeOptions({ Token: null, Name: \"\" }));\r\n  } catch (error) {\r\n    console.log(error);\r\n  } finally {\r\n    dispatch(Loader(false));\r\n  }\r\n};\r\n\r\nexport const getUserInfo = (token) => async (dispatch) => {\r\n  try {\r\n    // console.log(userData);\r\n    dispatch(Loader(true));\r\n    // const result = await axios.post(baseURL + \"/users/logout\", token);\r\n    const result = await axios({\r\n      method: \"\",\r\n      url: baseURL + \"current\",\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n    dispatch(setUserInfo(result.data));\r\n    // dispatch(changeOptions({ Token: null, Name: \"\" }));\r\n  } catch (error) {\r\n    console.log(error);\r\n  } finally {\r\n    dispatch(Loader(false));\r\n  }\r\n};\r\n"],"sourceRoot":""}